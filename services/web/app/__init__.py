"""
Flask app starting routines
"""
import os
import sqlite3
from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from config import Config
from werkzeug.security import generate_password_hash, check_password_hash


app = Flask(__name__)
app.config.from_object(Config)



# create table if it does not exist
if not os.path.exists(app.config["DATABASE_NAME"]):
    conn = sqlite3.connect(app.config["DATABASE_NAME"])
    cur = conn.cursor()
    cur.execute("CREATE TABLE exploits (path TEXT PRIMARY KEY, header TEXT, body TEXT, body_base64encoded TEXT);")
    conn.commit()

db = SQLAlchemy(app)

from app import routes  # noqa
